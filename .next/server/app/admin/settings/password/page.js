(()=>{var e={};e.id=444,e.ids=[444],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},15673:e=>{"use strict";e.exports=require("node:events")},4887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u}),r(75027),r(70893),r(54403),r(90996);var s=r(30170),a=r(45002),n=r(83876),i=r.n(n),o=r(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["admin",{children:["settings",{children:["password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75027)),"D:\\Aplikasi\\simbarku\\app\\admin\\settings\\password\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70893)),"D:\\Aplikasi\\simbarku\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,85080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,54403)),"D:\\Aplikasi\\simbarku\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e),async e=>(await Promise.resolve().then(r.bind(r,85080))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Aplikasi\\simbarku\\app\\admin\\settings\\password\\page.tsx"],d="/admin/settings/password/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/settings/password/page",pathname:"/admin/settings/password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},15440:(e,t,r)=>{Promise.resolve().then(r.bind(r,61960))},11767:(e,t,r)=>{Promise.resolve().then(r.bind(r,89842))},86128:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},67583:()=>{},89842:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(97247),a=r(28964),n=r(34178);function i(){(0,n.useRouter)();let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),p=async s=>{if(s.preventDefault(),r!==o){c("Password baru dan konfirmasi tidak cocok");return}if(r.length<8){c("Password harus minimal 8 karakter");return}m(!0),c("");try{let s=await fetch("/api/admin/update-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:r})}),a=await s.json();a.success?(c("Password berhasil diperbarui"),t(""),i(""),l("")):c(a.message||"Gagal memperbarui password")}catch(e){c("Terjadi kesalahan saat memperbarui password"),console.error(e)}finally{m(!1)}};return(0,s.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Ubah Password"}),u&&s.jsx("div",{className:`p-4 mb-4 rounded-md ${u.includes("berhasil")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:u}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password Saat Ini"}),s.jsx("input",{type:"password",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password Baru"}),s.jsx("input",{type:"password",value:r,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Konfirmasi Password Baru"}),s.jsx("input",{type:"password",value:o,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Memproses...":"Perbarui Password"})})]})]})}},34178:(e,t,r)=>{"use strict";var s=r(25289);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},70893:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,dynamic:()=>o,metadata:()=>i});var s=r(72051);r(11115);var a=r(89171),n=r(1035);let i={title:"Admin Simbarku",description:"Admin dashboard for managing Simbarku application, including orders, products, and user management."},o="force-dynamic";async function l({children:e}){try{await (0,n.qZ)()}catch(e){console.error("Failed to initialize database connection:",e)}return(0,s.jsxs)("html",{lang:"en",children:[s.jsx("body",{className:"flex min-h-screen w-full flex-col",children:e}),s.jsx(a.c,{})]})}},75027:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`D:\Aplikasi\simbarku\app\admin\settings\password\page.tsx#default`)},54403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,dynamic:()=>i,metadata:()=>n});var s=r(72051);r(7633);var a=r(26269);let n={title:"Simbarku.co",description:"Tempat jual beli simbar online"},i="force-dynamic";function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:s.jsx(a.Suspense,{fallback:null,children:e})})})}},1035:(e,t,r)=>{"use strict";r.d(t,{AW:()=>U,B3:()=>M,FO:()=>L,IH:()=>D,Pz:()=>j,Rf:()=>q,Xp:()=>N,ZU:()=>T,_z:()=>E,kY:()=>S,qZ:()=>A});var s=r(87615),a=r(91141),n=r(56042),i=r(53283),o=r(57713),l=r(87420),u=r(31318),c=r(90273),d=r(41054),m=r(52792),p=r(18653),f=r(29785),h=r(9850),g=r(95013),b=r(98446),y=r(5183);let x=s.createPool({host:process.env.MYSQL_HOST||"localhost",port:Number(process.env.MYSQL_PORT)||3306,user:process.env.MYSQL_USER||"root",password:process.env.MYSQL_PASSWORD||"",database:process.env.MYSQL_DATABASE||"simbarku"}),w=(0,a.tS)(x),v=(0,n.iq)("products",{id:(0,i.e$)("id").primaryKey().autoincrement(),imageUrl:(0,o.fL)("image_url").notNull(),name:(0,o.fL)("name").notNull(),status:(0,l.MI)("status",["active","inactive","archived"]).notNull(),price:(0,u.gH)("price",{precision:10,scale:2}).notNull(),stock:(0,i.e$)("stock").notNull(),availableAt:(0,c.AB)("available_at").notNull()}),P=(0,n.iq)("admin",{id_user:(0,i.e$)("id_user").primaryKey().autoincrement(),username:(0,d.L7)("username",{length:20}).notNull(),password:(0,d.L7)("password",{length:15}).notNull()});(0,n.iq)("forum",{idPesan:(0,i.e$)("id_pesan").primaryKey().autoincrement(),isiPesan:(0,o.fL)("isi_pesan").notNull(),gambarSimbarUser:(0,m.Ec)("gambar_simbar_user"),kategori:(0,d.L7)("kategori",{length:255}).notNull()}),(0,n.iq)("testimoni",{idTestimoni:(0,i.e$)("id_testimoni").primaryKey().autoincrement(),nama:(0,o.fL)("nama").notNull(),deskripsi:(0,o.fL)("deskripsi").notNull(),rating:(0,i.e$)("rating").notNull()});let _=(0,n.iq)("transaksi",{id_transaksi:(0,i.e$)("id_transaksi").primaryKey().autoincrement(),id_user:(0,i.e$)("id_user").notNull().references(()=>k.idUser),harga:(0,i.e$)("harga").notNull(),tanggal:(0,p.hT)("tanggal").notNull(),status:(0,l.MI)("status",["completed","pending","canceled"]).notNull().default("pending")}),k=(0,n.iq)("user",{idUser:(0,i.e$)("id_user").primaryKey().autoincrement(),nama:(0,d.L7)("nama",{length:30}).notNull(),no_telp:(0,i.e$)("no_telp").notNull(),alamat:(0,o.fL)("alamat").notNull(),email:(0,o.fL)("email").notNull()});async function N(e,t=0){try{if(e){let r=await w.select().from(v).where((0,f.vL)(v.name,`%${e}%`)).limit(1e3);return{products:r,newOffset:t,totalProducts:r.length}}let r=await w.select({count:(0,h.QX)()}).from(v),s=Number(r[0].count),a=await w.select().from(v).limit(5).offset(t);return a.length,{products:a,newOffset:t,totalProducts:s}}catch(e){return console.error("Error fetching products:",e),{products:[],newOffset:0,totalProducts:0}}}async function S(e){try{let t=await w.select().from(P).where((0,f.eq)(P.username,e)).limit(1);return t.length>0?t[0]:null}catch(e){return console.error("Error fetching admin:",e),null}}async function q(e=0){try{let t=await w.select({count:(0,h.QX)()}).from(k);return{users:await w.select().from(k).limit(10).offset(e),totalUsers:Number(t[0].count)}}catch(e){return console.error("Error fetching users:",e),{users:[],totalUsers:0}}}async function j(e=0){try{let t=await w.select({count:(0,h.QX)()}).from(_);return{transactions:(await w.select({id_transaksi:_.id_transaksi,id_user:_.id_user,harga:_.harga,tanggal:_.tanggal,status:_.status,userName:k.nama}).from(_).leftJoin(k,(0,f.eq)(_.id_user,k.idUser)).limit(10).offset(e).orderBy((0,g.C)(_.tanggal))).map(e=>({...e,userName:e.userName||"Pengguna Tidak Dikenal"})),totalTransactions:Number(t[0].count)}}catch(e){return console.error("Error fetching transactions with user data:",e),{transactions:[],totalTransactions:0}}}async function A(){try{return await w.select().from(v).limit(1),console.log("Database connection successful"),{success:!0}}catch(e){return console.error("Database initialization error:",e),{success:!1,error:e}}}async function E(e,t){try{return await w.update(P).set({password:t}).where((0,f.eq)(P.id_user,e)),!0}catch(e){throw console.error("Error updating admin password:",e),e}}async function T(){try{let e=await w.select({month:(0,b.i6)`DATE_FORMAT(tanggal, '%Y-%m')`,total:(0,b.i6)`COUNT(id_transaksi)`,revenue:(0,b.i6)`SUM(harga)`}).from(_).groupBy((0,b.i6)`DATE_FORMAT(tanggal, '%Y-%m')`).orderBy((0,b.i6)`DATE_FORMAT(tanggal, '%Y-%m')`).limit(12),t=await w.select({status:_.status,count:(0,h.QX)(),revenue:(0,b.i6)`SUM(harga)`}).from(_).groupBy(_.status),r=await w.select({id_user:_.id_user,totalPurchases:(0,h.QX)(),totalSpent:(0,b.i6)`SUM(harga)`}).from(_).where((0,f.eq)(_.status,"completed")).groupBy(_.id_user).orderBy((0,g.C)((0,b.i6)`SUM(harga)`)).limit(5);return{monthlyTransactions:e,transactionsByStatus:t,topCustomers:r}}catch(e){return console.error("Error fetching transaction analytics:",e),{monthlyTransactions:[],transactionsByStatus:[],topCustomers:[]}}}async function M(e){try{if(0===e.length)return[];return await w.select().from(k).where((0,f.d3)(k.idUser,e))}catch(e){return console.error("Error fetching users by IDs:",e),[]}}async function U(e=0,t=10){try{let r=await w.select().from(k).limit(t).offset(e),s=await w.select({count:(0,h.QX)()}).from(k);return{users:r,totalUsers:s[0].count}}catch(e){return console.error("Error fetching users:",e),{users:[],totalUsers:0}}}async function D(e){try{return await w.select().from(_).where((0,f.eq)(_.id_user,e))}catch(t){return console.error(`Error fetching transactions for user ${e}:`,t),[]}}async function L(e){try{let t=await w.select().from(k).where((0,f.eq)(k.idUser,e)).limit(1);return t.length>0?t[0]:null}catch(t){return console.error(`Error fetching user ${e}:`,t),null}}(0,y.fC)(v)},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(54564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},85080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(54564);let a=e=>[{type:"image/x-icon",sizes:"32x29",url:(0,s.fillMetadataSegment)(".",e.params,"icon.ico")+"?9ca28da75d4503b7"}]},11115:()=>{},7633:()=>{},61960:(e,t,r)=>{"use strict";r.d(t,{Analytics:()=>s}),r(28964);function s(e){return null}},89171:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});var s=r(45347);let a=(0,s.createProxy)(String.raw`D:\Aplikasi\simbarku\node_modules\@vercel\analytics\dist\react\index.mjs#Analytics`);(0,s.createProxy)(String.raw`D:\Aplikasi\simbarku\node_modules\@vercel\analytics\dist\react\index.mjs#track`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,39,564,61],()=>r(4887));module.exports=s})();